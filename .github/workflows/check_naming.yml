name: Validate Pull Request Naming Convention

on:
  pull_request:
    branches:
      - dev

jobs:
  check-filenames:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Validate file names
      run: |
        INVALID_FILES=$(git diff --name-only origin/dev | grep -i -E '^[^A-Z]|[a-z]+\.py$' || true)
        if [ ! -z "$INVALID_FILES" ]; then
          echo "Les fichiers suivants ne respectent pas la nomenclature :"
          echo "$INVALID_FILES"
          exit 1
        fi
